{"type":"epic","id":"EPIC-1","title":"Foundation and Architecture Decisions","intent":"Establish the architectural foundation for xpand through thorough decision records. No code until decisions are made.","principles":["Decision records before code","Document trade-offs explicitly","Consider AI agent users"],"status":"pending"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.1","title":"Write ADR-001: Pattern Storage and Distribution","description":"Decide how patterns are stored and distributed. Options: embedded in binary, local files, remote registry. Consider versioning, updates, offline usage, and enterprise distribution.","acceptance":["ADR exists in docs/decisions/001-pattern-storage.md","At least 3 options evaluated with pros/cons","Decision made with clear rationale","Implementation path outlined"],"status":"pending"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.2","title":"Write ADR-002: Pattern Definition Format","description":"Decide the format platform teams use to define patterns. Options: Go code, YAML templates, CUE/KCL/Pkl. Consider authoring experience, validation, extensibility, and learning curve.","acceptance":["ADR exists in docs/decisions/002-pattern-format.md","At least 3 options evaluated with pros/cons","Decision made with clear rationale","Example pattern shown in chosen format"],"status":"pending"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.3","title":"Write ADR-003: Environment Variant Handling","description":"Decide how xpand handles dev/staging/prod differences. Options: xpand handles entirely, Kustomize overlays, or both. Consider separation of concerns, complexity, and existing workflows.","acceptance":["ADR exists in docs/decisions/003-environment-variants.md","At least 3 options evaluated with pros/cons","Decision made with clear rationale","Example workflow shown"],"status":"pending"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.4","title":"Write ADR-004: AI Agent as Primary User","description":"Document design implications of AI agents being primary users alongside humans. Consider help text, output formats, error messages, determinism, and discoverability.","acceptance":["ADR exists in docs/decisions/004-ai-agent-user.md","Specific design guidelines documented","Examples of agent-friendly vs agent-hostile patterns","Implications for CLI design documented"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.5","title":"Write ADR-005: xpand Scope - Initial Generation Only","description":"Document that xpand handles initial generation only. All subsequent modifications use ConfigHub functions. This eliminates merge/preserve complexity and aligns with the 'configuration as API' philosophy.","acceptance":["ADR exists in docs/decisions/005-merge-preserve.md","Clear scope boundaries documented (in scope vs out of scope)","ConfigHub function workflow documented","Re-run behavior documented (error, --diff, --force)"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.6","title":"Create architecture overview document","description":"Write docs/architecture.md explaining the overall system design: patterns, expansion, output, and integration with Git/CI/ConfigHub.","acceptance":["Document exists at docs/architecture.md","Includes system context diagram","Explains key components and their relationships","References relevant ADRs"],"status":"done"}
{"type":"epic","id":"EPIC-2","title":"CLI Foundation","intent":"Build the core CLI structure with Cobra, including help system, flags, and output formatting. No pattern logic yet.","principles":["Agent-friendly help text","Structured output support","Testable commands"],"status":"pending","depends_on":"EPIC-1"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.1","title":"Initialize Go module and project structure","description":"Set up go.mod, directory structure, and basic dependencies (Cobra, etc.).","acceptance":["go.mod exists with module name","Directory structure matches CLAUDE.md","go build succeeds","Basic main.go with version command"],"status":"done"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.2","title":"Implement root command with version and help","description":"Create the root Cobra command with global flags, version info, and comprehensive help text.","acceptance":["xpand --help shows useful help","xpand --version shows version","Global flags: --verbose, --output (json/yaml/text)","Help text is agent-friendly with examples"],"status":"pending"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.3","title":"Implement 'patterns' command group","description":"Add commands for listing and describing available patterns: patterns list, patterns describe <name>.","acceptance":["xpand patterns list shows available patterns","xpand patterns describe <name> shows pattern details","Output supports --output json for agents","Help text includes examples"],"status":"pending"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.4","title":"Implement 'create' command skeleton","description":"Add the create command with flag parsing but no expansion logic. Focus on input validation and help text.","acceptance":["xpand create <pattern> parses pattern name","Flags: --env, --set, --spec-file, --output-dir, --dry-run, --diff, --force","Input validation with clear error messages","Help text with multiple examples"],"status":"pending"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.5","title":"Add interactive mode support","description":"Implement --interactive flag that prompts for required values using survey/bubbletea.","acceptance":["xpand create <pattern> --interactive prompts for values","Shows descriptions and defaults for each field","Validates input as user types","Can be disabled with --no-interactive"],"status":"pending"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.6","title":"Add structured output support","description":"Implement --output flag supporting json, yaml, and text formats for all commands.","acceptance":["All commands support --output json","JSON output is parseable and consistent","Error output also respects --output format","Text format is human-readable default"],"status":"pending"}
{"type":"epic","id":"EPIC-3","title":"Pattern System","intent":"Implement the pattern loading, parsing, and expansion system. This is the core of xpand.","principles":["Patterns are explicit","Expansion is deterministic","Output is complete on first run"],"status":"pending","depends_on":"EPIC-1"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.1","title":"Define pattern schema","description":"Create the schema/struct for pattern definitions. Must support: metadata, input fields with types/defaults/validation, and resource templates.","acceptance":["Pattern schema defined in Go types","Schema supports all required features","Schema is documented with examples","Validation functions exist"],"status":"pending"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.2","title":"Implement pattern loader","description":"Build the pattern loading system based on ADR-001 decision. Load patterns from chosen source (embedded, files, or registry).","acceptance":["Patterns can be loaded from chosen source","Loader validates pattern schema","Clear errors for invalid patterns","Patterns are cached appropriately"],"status":"pending"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.3","title":"Implement pattern expansion engine","description":"Build the core expansion logic that takes pattern + inputs and produces explicit resources. No merge logic needed - generates from scratch only.","acceptance":["Expansion produces valid Kubernetes YAML","All fields are explicit (no placeholders)","Deterministic output (same input = same output)","Labels added to identify xpand-generated resources"],"status":"pending"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.4","title":"Create serverless-event-app pattern","description":"Implement the first pattern: serverless event-driven app (the messagewall pattern). Produces S3, DynamoDB, Lambda, IAM, EventBridge resources.","acceptance":["Pattern produces all 17 resources","Resources match current Composition output","Pattern has comprehensive input validation","Pattern is documented"],"status":"pending"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.5","title":"Implement output grouping","description":"Group generated resources by type into separate files: storage.yaml, iam.yaml, compute.yaml, events.yaml.","acceptance":["Resources grouped by logical type","Files named consistently","Multi-doc YAML with --- separators","File headers with generation metadata"],"status":"pending"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.6","title":"Implement existing resource detection","description":"Detect when output directory already contains resources and provide helpful error message directing users to ConfigHub functions for modifications.","acceptance":["Detects existing resources in output directory","Clear error message with ConfigHub function examples","--diff flag shows what would change","--force flag allows regeneration with warning"],"status":"pending"}
{"type":"epic","id":"EPIC-4","title":"Documentation and Testing","intent":"Comprehensive documentation and test coverage.","principles":["Tests before features","Documentation as specification","Examples are runnable"],"status":"pending"}
{"type":"issue","epic":"EPIC-4","id":"ISSUE-4.1","title":"Write CLI reference documentation","description":"Document all commands, flags, and options in docs/cli-reference.md.","acceptance":["All commands documented","All flags documented with defaults","Examples for each command","Generated from code where possible"],"status":"pending"}
{"type":"issue","epic":"EPIC-4","id":"ISSUE-4.2","title":"Write pattern development guide","description":"Document how platform teams create new patterns in docs/patterns.md.","acceptance":["Pattern schema documented","Step-by-step guide to create pattern","Example pattern with annotations","Testing patterns documented"],"status":"pending"}
{"type":"issue","epic":"EPIC-4","id":"ISSUE-4.3","title":"Create golden file tests for patterns","description":"Test that patterns produce expected output using golden file comparison.","acceptance":["testdata/ contains expected outputs","Tests compare actual vs expected","Easy to update golden files","CI runs golden tests"],"status":"pending"}
{"type":"issue","epic":"EPIC-4","id":"ISSUE-4.4","title":"Add integration tests for CLI","description":"Test full CLI workflows: create new resources, detect existing resources, diff scenarios.","acceptance":["Tests cover happy paths","Tests cover error cases","Tests run in CI","Tests are fast (<30s total)"],"status":"pending"}
{"type":"issue","epic":"EPIC-4","id":"ISSUE-4.5","title":"Write user guide with examples","description":"Create docs/user-guide.md with real-world usage examples including ConfigHub function workflow for updates.","acceptance":["Quick start section","Common workflows documented","ConfigHub functions integration documented","Examples are copy-pasteable"],"status":"pending"}
